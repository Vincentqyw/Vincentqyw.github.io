<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 6.2.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/realcat-apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/realcat-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/realcat-32x32.png">
  <link rel="mask-icon" href="/images/realcat-safari-pinned-tab.svg" color="#222">
  <meta name="google-site-verification" content="u46QTaG_Dv3OZLpOBKYtqyuiNtIdnhSG5ASKoNvGBCM">
  <meta name="baidu-site-verification" content="MtcbwE45ft">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css" integrity="sha256-AbA177XfpSnFEvgpYu1jMygiLabzPCJCRIBtR5jGc0k=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"www.vincentqin.tech","root":"/","images":"/images","scheme":"Gemini","darkmode":false,"version":"8.13.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":{"enable":true,"show_result":true,"style":"flat"},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":true,"pangu":false,"comments":{"style":"tabs","active":"waline","storage":true,"lazyload":true,"nav":null,"activeClass":"waline"},"stickytabs":true,"motion":{"enable":false,"async":true,"transition":{"post_block":"fadeIn","post_header":"fadeIn","post_body":"fadeIn","coll_header":"fadeIn","sidebar":"fadeIn"}},"prism":false,"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"}}</script><script src="/js/config.js"></script>

    <meta name="description" content="这里鄙人汇总了有关光场（Light Field）一些有用的链接以及光场数据的处理过程。 声明：一切理解都是本人观点，如有疑问，还望在评论中留言。如需转载请与本人联系，谢谢合作! )">
<meta property="og:type" content="article">
<meta property="og:title" content="Light Field 光场以及MATLAB光场工具包(LightField ToolBox)的使用说明">
<meta property="og:url" content="https://www.vincentqin.tech/posts/LightField-Toolbox/index.html">
<meta property="og:site_name" content="RealCat">
<meta property="og:description" content="这里鄙人汇总了有关光场（Light Field）一些有用的链接以及光场数据的处理过程。 声明：一切理解都是本人观点，如有疑问，还望在评论中留言。如需转载请与本人联系，谢谢合作! )">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://vincentqin.gitee.io/blogresource-1/LightField-Toolbox/91252468.png">
<meta property="og:image" content="https://vincentqin.gitee.io/blogresource-1/LightField-Toolbox/deer.jpg">
<meta property="og:image" content="https://vincentqin.gitee.io/blogresource-1/LightField-Toolbox/deer-zoom-in.png">
<meta property="og:image" content="https://vincentqin.gitee.io/blogresource-1/LightField-Toolbox/all-views-raw.png">
<meta property="og:image" content="https://vincentqin.gitee.io/blogresource-1/LightField-Toolbox/all-views-freq-correction.png">
<meta property="og:image" content="https://vincentqin.gitee.io/blogresource-1/LightField-Toolbox/all-views-freq-color-correction.png">
<meta property="article:published_time" content="2017-02-16T02:45:54.000Z">
<meta property="article:modified_time" content="2018-01-28T14:55:30.000Z">
<meta property="article:author" content="Vincent Qin">
<meta property="article:tag" content="Light Field">
<meta property="article:tag" content="Matlab光场工具包">
<meta property="article:tag" content="光场">
<meta property="article:tag" content="计算成像">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://vincentqin.gitee.io/blogresource-1/LightField-Toolbox/91252468.png">


<link rel="canonical" href="https://www.vincentqin.tech/posts/LightField-Toolbox/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"en","comments":true,"permalink":"https://www.vincentqin.tech/posts/LightField-Toolbox/","path":"posts/LightField-Toolbox/","title":"Light Field 光场以及MATLAB光场工具包(LightField ToolBox)的使用说明"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>Light Field 光场以及MATLAB光场工具包(LightField ToolBox)的使用说明 | RealCat</title>
  
  <script class="next-config" data-name="google_analytics" type="application/json">{"tracking_id":"UA-97856334-1","only_pageview":true}</script>
  <script src="/js/third-party/analytics/google-analytics.js"></script>





<link rel="dns-prefetch" href="https://comments.vincentqin.tech">
  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
<style>.darkmode--activated{--body-bg-color:#282828;--content-bg-color:#333;--card-bg-color:#555;--text-color:#ccc;--blockquote-color:#bbb;--link-color:#ccc;--link-hover-color:#eee;--brand-color:#ddd;--brand-hover-color:#ddd;--table-row-odd-bg-color:#282828;--table-row-hover-bg-color:#363636;--menu-item-bg-color:#555;--btn-default-bg:#222;--btn-default-color:#ccc;--btn-default-border-color:#555;--btn-default-hover-bg:#666;--btn-default-hover-color:#ccc;--btn-default-hover-border-color:#666;--highlight-background:#282b2e;--highlight-foreground:#a9b7c6;--highlight-gutter-background:#34393d;--highlight-gutter-foreground:#9ca9b6}.darkmode--activated img{opacity:.75}.darkmode--activated img:hover{opacity:.9}.darkmode--activated code{color:#69dbdc;background:0 0}button.darkmode-toggle{z-index:9999}.darkmode-ignore,img{display:flex!important}.beian img{display:inline-block!important}</style></head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">RealCat</p>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">Turn on, Tune in, Drop out</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives<span class="badge">78</span></a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories<span class="badge">15</span></a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags<span class="badge">114</span></a></li><li class="menu-item menu-item-collections"><a href="/collections" rel="section"><i class="fa fa-diamond fa-fw"></i>Collections</a></li><li class="menu-item menu-item-guest_comments"><a href="/guestbook" rel="section"><i class="fa fa-user fa-fw"></i>About</a></li>
  </ul>
</nav>




</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%85%89%E5%9C%BA%E7%9B%B8%E6%9C%BA"><span class="nav-number">1.</span> <span class="nav-text">光场相机</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%8E%B7%E5%8F%96.lfpor-.lfr%E5%8E%9F%E6%96%87%E4%BB%B6"><span class="nav-number">2.</span> <span class="nav-text">获取.LFP(or .LFR)原文件</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#matlab-light-field-toolbox%E5%85%89%E5%9C%BA%E5%B7%A5%E5%85%B7%E7%AE%B1%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="nav-number">3.</span> <span class="nav-text">Matlab Light Field
ToolBox(光场工具箱)的使用</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%8B%E8%BD%BD%E5%85%89%E5%9C%BA%E5%B7%A5%E5%85%B7%E5%8C%85lftoolbox"><span class="nav-number">3.1.</span> <span class="nav-text">下载光场工具包（LFToolBox）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%89%8D%E6%9C%9F%E5%87%86%E5%A4%87"><span class="nav-number">3.2.</span> <span class="nav-text">前期准备</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#step-1-%E5%88%9B%E5%BB%BA%E8%87%AA%E5%B7%B1%E7%9A%84%E5%B7%A5%E4%BD%9C%E7%9B%AE%E5%BD%95"><span class="nav-number">3.2.1.</span> <span class="nav-text">step 1: 创建自己的工作目录</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#step-2-%E6%A0%B9%E6%8D%AE%E7%9B%B8%E6%9C%BA%E5%BA%8F%E5%88%97%E5%8F%B7%E4%BF%AE%E6%94%B9%E6%96%87%E4%BB%B6%E5%90%8D"><span class="nav-number">3.2.2.</span> <span class="nav-text">step 2:
根据相机序列号修改文件名</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#step-3-%E6%8A%8A%E7%99%BD%E5%9B%BE%E5%83%8F%E6%96%87%E4%BB%B6%E6%8B%B7%E8%B4%9D%E5%88%B0%E7%9B%B8%E5%BA%94%E7%9A%84%E6%96%87%E4%BB%B6%E5%A4%B9%E4%B8%8B"><span class="nav-number">3.2.3.</span> <span class="nav-text">step 3:
把白图像文件拷贝到相应的文件夹下</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B5%8B%E8%AF%95%E5%BC%80%E5%A7%8B"><span class="nav-number">3.3.</span> <span class="nav-text">测试开始</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%A4%84%E7%90%86%E7%99%BD%E5%9B%BE%E5%83%8F"><span class="nav-number">3.3.1.</span> <span class="nav-text">处理白图像</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%A7%A3%E7%A0%81lfp%E6%96%87%E4%BB%B6"><span class="nav-number">3.3.2.</span> <span class="nav-text">解码LFP文件</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%A2%91%E5%9F%9F%E6%BB%A4%E6%B3%A2%E4%BB%A5%E5%8F%8A%E9%A2%9C%E8%89%B2%E6%A0%A1%E6%AD%A3"><span class="nav-number">3.3.3.</span> <span class="nav-text">频域滤波以及颜色校正</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9%E5%8F%8A%E6%B5%8B%E8%AF%95%E4%BB%A3%E7%A0%81"><span class="nav-number">4.</span> <span class="nav-text">注意事项及测试代码</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8F%82%E6%95%B0%E8%AE%BE%E7%BD%AE%E5%A5%BD%E4%BA%86%E5%86%8Drun"><span class="nav-number">4.1.</span> <span class="nav-text">参数设置好了再Run</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B2%A1%E6%9C%89%E5%9B%BE%E5%83%8F%E6%96%87%E4%BB%B6%E6%80%8E%E4%B9%88%E6%90%9E"><span class="nav-number">4.2.</span> <span class="nav-text">没有图像文件怎么搞</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%A7%A3%E7%A0%81%E6%95%88%E6%9E%9C%E4%B8%BA%E4%BD%95%E4%B8%8D%E4%BD%B3"><span class="nav-number">4.3.</span> <span class="nav-text">解码效果为何不佳</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#lytro1.0-2d%E5%8E%9F%E5%A7%8B%E5%9B%BE%E5%83%8F%E8%A7%A3%E7%A0%81%E5%8E%9F%E7%90%86"><span class="nav-number">4.4.</span> <span class="nav-text">Lytro1.0 2D原始图像解码原理</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B5%8B%E8%AF%95%E4%BB%A3%E7%A0%81"><span class="nav-number">4.5.</span> <span class="nav-text">测试代码</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%95%B0%E5%AD%97%E9%87%8D%E8%81%9A%E7%84%A6"><span class="nav-number">4.6.</span> <span class="nav-text">数字重聚焦</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#lytro-desktop"><span class="nav-number">4.7.</span> <span class="nav-text">Lytro Desktop</span></a></li></ol></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Vincent Qin"
      src="https://vincentqin.gitee.io/images/qin_small.png">
  <p class="site-author-name" itemprop="name">Vincent Qin</p>
  <div class="site-description" itemprop="description">Keep Your Curiosity</div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">78</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">15</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">114</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author site-overview-item animated">
      <span class="links-of-author-item">
        <a href="https://github.com/Vincentqyw" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;Vincentqyw" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:realcat@126.com" title="Email → mailto:realcat@126.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>Email</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://vincentqin.gitee.io/images/qrcode_wechat.jpg" title="Wechat → https:&#x2F;&#x2F;vincentqin.gitee.io&#x2F;images&#x2F;qrcode_wechat.jpg" rel="noopener" target="_blank"><i class="fab fa-weixin fa-fw"></i>Wechat</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.zhihu.com/people/i_vincent/activities" title="Zhihu → https:&#x2F;&#x2F;www.zhihu.com&#x2F;people&#x2F;i_vincent&#x2F;activities" rel="noopener" target="_blank"><i class="fab fa-quora fa-fw"></i>Zhihu</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://twitter.com/AlphaRealcat" title="Twitter → https:&#x2F;&#x2F;twitter.com&#x2F;AlphaRealcat" rel="noopener" target="_blank"><i class="fab fa-twitter fa-fw"></i>Twitter</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://space.bilibili.com/18136563" title="Bilibili → https:&#x2F;&#x2F;space.bilibili.com&#x2F;18136563" rel="noopener" target="_blank"><i class="fa fa-video-camera fa-fw"></i>Bilibili</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://bafybeic2jt62kpyh6cz2g4ngxs4kazojfw3dhx53mco3wc6f56dejty4xm.ipfs.infura-ipfs.io/" title="Web3.0 → https:&#x2F;&#x2F;bafybeic2jt62kpyh6cz2g4ngxs4kazojfw3dhx53mco3wc6f56dejty4xm.ipfs.infura-ipfs.io" rel="noopener" target="_blank"><i class="link fa-fw"></i>Web3.0</a>
      </span>
  </div>


  <div class="links-of-blogroll motion-element">
    <div class="links-of-blogroll-title">
      <i class="fa fa-fw fa-dashboard"></i>
      Scholar
    </div>
    <ul class="links-of-blogroll-list">
        <li class="links-of-blogroll-item">
          <a href="http://xxx.itp.ac.cn/" title="http:&#x2F;&#x2F;xxx.itp.ac.cn" rel="noopener" target="_blank">Arxiv-Mirror</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="http://arxiv-sanity.com/" title="http:&#x2F;&#x2F;arxiv-sanity.com&#x2F;" rel="noopener" target="_blank">Arxiv-sanity</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="http://openaccess.thecvf.com/menu.py" title="http:&#x2F;&#x2F;openaccess.thecvf.com&#x2F;menu.py" rel="noopener" target="_blank">CVF</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://paperswithcode.com/sota" title="https:&#x2F;&#x2F;paperswithcode.com&#x2F;sota" rel="noopener" target="_blank">Paper&Code</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://scihub.wikicn.top/" title="https:&#x2F;&#x2F;scihub.wikicn.top&#x2F;" rel="noopener" target="_blank">Scihub</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="http://ras.papercept.net/conferences/scripts/start.pl" title="http:&#x2F;&#x2F;ras.papercept.net&#x2F;conferences&#x2F;scripts&#x2F;start.pl" rel="noopener" target="_blank">RAS</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://openreview.net/" title="https:&#x2F;&#x2F;openreview.net&#x2F;" rel="noopener" target="_blank">OpenReview</a>
        </li>
    </ul>
  </div>


  <div class="links-of-blogroll site-overview-item animated">
    <div class="links-of-blogroll-title"><i class="fa fa-battery-three-quarters fa-fw"></i>
      Friends Links
    </div>
    <ul class="links-of-blogroll-list">
        <li class="links-of-blogroll-item">
          <a href="http://www.wangpengan.com/" title="http:&#x2F;&#x2F;www.wangpengan.com&#x2F;" rel="noopener" target="_blank">Tensorboy</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="http://simtalk.cn/" title="http:&#x2F;&#x2F;simtalk.cn&#x2F;" rel="noopener" target="_blank">Simshang</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://sttomato.github.io/" title="https:&#x2F;&#x2F;sttomato.github.io" rel="noopener" target="_blank">Tomato</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="http://dfine.tech/" title="http:&#x2F;&#x2F;dfine.tech&#x2F;" rel="noopener" target="_blank">Newdee</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="http://cs-people.bu.edu/yfhu/" title="http:&#x2F;&#x2F;cs-people.bu.edu&#x2F;yfhu&#x2F;" rel="noopener" target="_blank">WhoIf</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="http://yulunzhang.com/" title="http:&#x2F;&#x2F;yulunzhang.com&#x2F;" rel="noopener" target="_blank">Yulun</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://sanglongbest.github.io/" title="https:&#x2F;&#x2F;sanglongbest.github.io&#x2F;" rel="noopener" target="_blank">YangLiu</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://www.erenship.com/" title="https:&#x2F;&#x2F;www.erenship.com&#x2F;" rel="noopener" target="_blank">Eren</a>
        </li>
    </ul>
  </div>

  <div class="links-of-blogroll motion-element">
    <div class="links-of-blogroll-title">
      <i class="fa fa-fw fa-briefcase"></i>
      Common Links
    </div>
    <ul class="links-of-blogroll-list">
        <li class="links-of-blogroll-item">
          <a href="https://comments.vincentqin.tech/ui" title="https:&#x2F;&#x2F;comments.vincentqin.tech&#x2F;ui" rel="noopener" target="_blank">Comments</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://gitee.com/vincentqin/vincentqin" title="https:&#x2F;&#x2F;gitee.com&#x2F;vincentqin&#x2F;vincentqin" rel="noopener" target="_blank">Source</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://www.notion.so/realcat" title="https:&#x2F;&#x2F;www.notion.so&#x2F;realcat" rel="noopener" target="_blank">Notion</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="http://www.matrixcalculus.org/" title="http:&#x2F;&#x2F;www.matrixcalculus.org&#x2F;" rel="noopener" target="_blank">Calculus</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://emojipedia.org/" title="https:&#x2F;&#x2F;emojipedia.org&#x2F;" rel="noopener" target="_blank">Emoji</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://unstoppabledomains.com/" title="https:&#x2F;&#x2F;unstoppabledomains.com&#x2F;" rel="noopener" target="_blank">UD</a>
        </li>
    </ul>
  </div>




        </div>

      <div class="wechat_QR_code">
      <!-- 二维码 -->
      <img src ="https://vincentqin.tech/blog-resources/qrcode_wechat.jpg">
      <span>Follow Me on Wechat</span>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button" aria-label="Back to top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="en">
    <link itemprop="mainEntityOfPage" href="https://www.vincentqin.tech/posts/LightField-Toolbox/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://vincentqin.gitee.io/images/qin_small.png">
      <meta itemprop="name" content="Vincent Qin">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="RealCat">
      <meta itemprop="description" content="Keep Your Curiosity">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="Light Field 光场以及MATLAB光场工具包(LightField ToolBox)的使用说明 | RealCat">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Light Field 光场以及MATLAB光场工具包(LightField ToolBox)的使用说明
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2017-02-16 10:45:54" itemprop="dateCreated datePublished" datetime="2017-02-16T10:45:54+08:00">2017-02-16</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2018-01-28 22:55:30" itemprop="dateModified" datetime="2018-01-28T22:55:30+08:00">2018-01-28</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Light-Field/" itemprop="url" rel="index"><span itemprop="name">Light Field</span></a>
        </span>
    </span>

  
  
  <span class="post-meta-item">
    
    <span class="post-meta-item-icon">
      <i class="far fa-comment"></i>
    </span>
    <span class="post-meta-item-text">Waline: </span>
  
    <a title="waline" href="/posts/LightField-Toolbox/#waline" itemprop="discussionUrl">
      <span class="post-comments-count waline-comment-count" data-path="/posts/LightField-Toolbox/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
    <span class="post-meta-item" title="Views">
      <span class="post-meta-item-icon">
        <i class="far fa-eye"></i>
      </span>
      <span class="post-meta-item-text">Views: </span>
      <span class="waline-pageview-count" data-path="/posts/LightField-Toolbox/"></span>
    </span>
  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
        <script src="/assets/js/DPlayer.min.js"> </script><p><img data-src="https://vincentqin.gitee.io/blogresource-1/LightField-Toolbox/91252468.png" alt="Magic Leap">
<div class="note success"><p><a
href="https://www.vincentqin.tech/collections/">这里</a>鄙人汇总了有关光场（Light
Field）一些有用的链接以及光场数据的处理过程。 <span
id="inline-red">声明</span>：<u><strong>一切理解都是本人观点，如有疑问，还望在</strong>评论<strong>中留言。如需转载请与本人联系，谢谢合作</strong></u>!
)</p>
</div></p>
<span id="more"></span>
<p>开始正文之前，我把常用的光场图像处理程序放在了<a
target="_blank" rel="noopener" href="https://github.com/Vincentqyw/light-field-Processing">GitHub</a>，如下：</p>
<p><a target="_blank" rel="noopener" href="https://github.com/Vincentqyw/light-field-Processing"><img data-src="https://github-readme-stats.vercel.app/api/pin/?username=Vincentqyw&amp;repo=light-field-Processing&amp;show_owner=false&amp;theme=default"
alt="ReadMe Card" /></a></p>
<p><a target="_blank" rel="noopener" href="https://github.com/Vincentqyw/light-field-TB"><img data-src="https://github-readme-stats.vercel.app/api/pin/?username=Vincentqyw&amp;repo=light-field-TB&amp;show_owner=false&amp;theme=default"
alt="ReadMe Card" /></a></p>
<h2 id="光场相机">光场相机</h2>
<p>大家在刚刚入手光场领域的时候可能会用到目前消费级的手持光场相机，如Lytro或者ILLUM，如图（实验室的设备，鄙人可买不起ILLUM）：
<img data-src="https://vincentqin.gitee.io/blogresource-1/LightField-Toolbox/LF-cameras.jpg" /></p>
<h2 id="获取.lfpor-.lfr原文件">获取.LFP(or .LFR)原文件</h2>
<p>由Lytro拍摄的图像的原格式是.lfp格式，我们要将其解码成我们需要的格式。
工具：<strong>Lytro
Desktop</strong>，<strong>MATLAB光场工具包</strong>（很强大，推荐，本文介绍该方法）。</p>
<p>首先用数据线把设备连接到电脑，打开Lytro
Desktop，点击想要导入的图片，选中点击右上角立即处理，然后打开我的电脑图片-&gt;Lytro
Desktop图库.lytrolibrary*，就可以发现有很多文件夹名字是一串很长数字字母云云。点击进去可以发现里面有几个文件，以lytro为例，这几个文件如下形式：
<img data-src="https://vincentqin.gitee.io/blogresource-1/LightField-Toolbox/lfp_list.png" /></p>
<p><strong><font color=red>raw.lfp</font></strong>就是我们需要的原文件，之后我们就要利用Matlab光场工具包对其进行解码操作。</p>
<h2 id="matlab-light-field-toolbox光场工具箱的使用">Matlab Light Field
ToolBox(光场工具箱)的使用</h2>
<h3 id="下载光场工具包lftoolbox">下载光场工具包（LFToolBox）</h3>
<p>首先下载<a
target="_blank" rel="noopener" href="http://cn.mathworks.com/matlabcentral/fileexchange/49683-light-field-toolbox-v0-4">光场工具箱</a>并仔细阅读说明文档，根据文档把相应的数据拷贝到工具箱的文件夹下(这一步很关键，要仔细配置)。<del>如果不想在官网下载的话我上传到了度娘的云盘链接：<a
target="_blank" rel="noopener" href="http://pan.baidu.com/s/1hsDo0ks">链接</a>
密码：yykc。这是鄙人修改后的一个版本，可以直接运行。</del><strong><font color=red >另外鄙人在Github上传了一个版本，大家可以git
clone<a
target="_blank" rel="noopener" href="https://github.com/Vincentqyw/Light_Field_TB">链接</a></font></strong>。下载下来的工具包是这样的：</p>
<p><img data-src="https://vincentqin.gitee.io/blogresource-1/LightField-Toolbox/LF-TB-main.png" /></p>
<p>LFToolbox0.4就是我们需要的工具包，该工具包里包含很多函数，如下图：</p>
<p><img data-src="https://vincentqin.gitee.io/blogresource-1/LightField-Toolbox/LF-TB-files.png" /></p>
<p>在此，鄙人把一些比较常用的函数及文档用红色的框标注出来，其中PDF文档是该工具包的说明书。这个说明书中详细地介绍了该工具包的使用方法，我们完全可以根据该文档的介绍来实现自己想要的功能。如下是该说明书的截图：</p>
<p><img data-src="https://vincentqin.gitee.io/blogresource-1/LightField-Toolbox/LF-TB.png" /></p>
<p>该说明文档提供了各种函数用于从LFP文件中提取出自己需要的各种信息：白图像(white
image)，Raw Image，对齐后的图像，以及颜色校正，频域滤波后的图像等。
<del>因为时间不足没有整理的，感觉大家都对这个过程比较感兴趣，鄙人觉得有必要写一下到底如何读取lfp、lfr、raw文件了。好了言归正传，开写。</del></p>
<h3 id="前期准备">前期准备</h3>
<h4 id="step-1-创建自己的工作目录">step 1: 创建自己的工作目录</h4>
<p><u>如果是直接clone鄙人在github上的<a
target="_blank" rel="noopener" href="https://github.com/Vincentqyw/Light_Field_TB">工程</a>的话直接跳转<strong>step
2</strong></u>。如果没有，那就要建立自己的工作目录，便于文件的管理。这一步是必要的，如果建立的目录不一致，可能导致程序无法运行，这也是鄙人当时初次用这个工具包时常常出错的地方。好了，建立这样的目录结构：
<img data-src="https://vincentqin.gitee.io/blogresource-1/LightField-Toolbox/folder-structure-raw.png" /></p>
<h4 id="step-2-根据相机序列号修改文件名">step 2:
根据相机序列号修改文件名</h4>
<p><strong><font color=red >Sample_test</font></strong>表示我们的测试目录，里面包含了相机信息以及自己拍摄照片的图像（lfp/lfr）。
<strong><font color=red >Cameras</font></strong>
这个目录中又包含了几个文件夹，它们分别是以“A”或者“B”开头，在其后面有一长串数字。这其实就是光场相机的serial
number，我们可以从默认目录<u> c:&lt;username&gt;-
serial_number</u>中找到，这个数字每个相机不一样，大家根据自己的相机序列号修改这个目录哈。"A"表示的是LYTRO系列相机，“B”表示ILLUM系列相机；以上图为例，"A303134427"就是我相机的序列号。</p>
<h4 id="step-3-把白图像文件拷贝到相应的文件夹下">step 3:
把白图像文件拷贝到相应的文件夹下</h4>
<p>在每个序列号文件夹下又有一个文件夹<strong><font color=red >WhiteImages</font></strong>，这里面放着由该相机拍摄的白图像。所谓白图像就是一张由光场相机拍摄的白色的图像，当然自己也可以拿着光场相机对着白色的墙面拍几张，但是效果并不一定很好。庆幸的是LYTRO官方提供了白图像，以Lytro为例，我们可以从以下目录找到:<u>
c: <strong>username</strong>- serial_number</u>。如下图所示： <img data-src="https://vincentqin.gitee.io/blogresource-1/LightField-Toolbox/white-image-files-folders.png" /></p>
<p>我们发现这里有以下4个文件：<strong>data.C.0/1/2/3</strong>，这是官方把白图像压缩成了这种格式，此时需要用工具箱进行解码。我们需要的正是这四个文件，拷贝出这4个文件，放在<strong><font color=red >WhiteImages</font></strong>文件夹里。这一步相当关键，一定要确保拷贝对了目录。<strong><font color=red>注意</font></strong>，Illum相机的白图像与Lytro的白图像的存放位置不一样，在<strong>相机的SD卡</strong>里。
#### step 4: 将测试文件放到Images目录</p>
<p><strong><font color=red >Images</font></strong>文件夹下包含我们需要处理的文件们，<strong><font color=red >F01</font></strong>下存放LYTRO系列拍摄的文件，<strong><font color=red >B01</font></strong>下存放ILLUM系列拍摄的文件。以Lytro为例，由于前面已经有了测试文件<strong><font color=red >raw.lfp</font></strong>，我们就把这个文件放在<strong><font color=red >F01</font></strong>下。经过我们上述的过程之后，最后我们的目录会变成这样（注意：<u>Sample_test与LFToolBox0.4为同级目录，各个文件夹的名字务必正确</u>）：</p>
<p><img data-src="https://vincentqin.gitee.io/blogresource-1/LightField-Toolbox/folder-structure.png" /></p>
<h3 id="测试开始">测试开始</h3>
<p>鄙人用的是实验室的电脑，配置是：<strong>Intel(R) Core(TM) i7-4790 CPU
<span class="citation" data-cites="3.60GHz">@3.60GHz</span> 3.60GHz RAM
16GB</strong>。其中的Demo文件是本人编写的一小段测试代码，已经贴在了文末。接下来的过程就是RUN
CODE了。程序大致可以分为以下几个测试： 1. 处理白图像 2. 解码LFP文件 3.
频域滤波 4. 颜色校正</p>
<h4 id="处理白图像">处理白图像</h4>
<p>处理白图像的目的是得到相机的某些参数，鄙人当时是为了获得每幅光场的中心点坐标才进行的这一步。白图像拍摄的场景没有纹理，此时可以清楚的观察到微透镜成像的边界信息。如下图所示：</p>
<p><img data-src="https://vincentqin.gitee.io/blogresource-1/LightField-Toolbox/white-image-macro-pixels.png" /></p>
<p>可以看到的是，微透镜下成像是这种正六边形的网格，类似于蜂窝的结构，感觉很酷有木有。需要注意的是，该过程不是简单地提取出一张白图像来，而是提取几十张白图像对（image
pairs），这个过程运行起来有点久，以下是运行的截图：</p>
<p><img data-src="https://vincentqin.gitee.io/blogresource-1/LightField-Toolbox/running-process.png" /></p>
<h4 id="解码lfp文件">解码LFP文件</h4>
<p>如果只是单纯地读出LFP/LFR、RAW文件的数据的话可以分别用工具包提供的如下函数：LFReadLFP、LFReadRaw。注意两个函数的返回值不一样。LFReadLFP返回一个结构体类型的变量，它包含相机的各个信息，我们可以根据自己的需要保留数据。LFReadRaw返回的是一张uint16的灰度图，还没有经过demosaicing操作。去马赛克操作在malatb中有相应的函数，这点不用担心。我们在这里不是直接调用的LFReadLFP而是调用了工具箱提供的LFLytroDecodeImage函数。如果运行有问题（<u>若是直接clone鄙人github上项目的话，不需要修改</u>），将LFLytroDecodeImage中的WhiteImageDatabase路径由以下：</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">DecodeOptions = LFDefaultField( <span class="string">&#x27;DecodeOptions&#x27;</span>, <span class="string">&#x27;WhiteImageDatabasePath&#x27;</span>...</span><br><span class="line">,fullfile(<span class="string">&#x27;Cameras&#x27;</span>,<span class="string">&#x27;WhiteImageDatabase.mat&#x27;</span>));<span class="comment">% line 71</span></span><br></pre></td></tr></table></figure>
<p>改为：</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">DecodeOptions = LFDefaultField( <span class="string">&#x27;DecodeOptions&#x27;</span>, <span class="string">&#x27;WhiteImageDatabasePath&#x27;</span>...</span><br><span class="line"> ,fullfile(<span class="string">&#x27;Cameras&#x27;</span>,LFMetadata.SerialData.camera.serialNumber,<span class="string">&#x27;WhiteImageDatabase.mat&#x27;</span>));</span><br><span class="line"><span class="comment">%== 注意，这条插在  ---Select appropriate white image---上行，而不是在原来的71行修改==。</span></span><br></pre></td></tr></table></figure>
经过这样的修改之后，这下应该可以跑了。我们可以得到以下图像：
<center>
<img data-src="https://vincentqin.gitee.io/blogresource-1/LightField-Toolbox/deer.jpg" width="80%" >
</center>
局部放大效果图：
<center>
<img data-src="https://vincentqin.gitee.io/blogresource-1/LightField-Toolbox/deer-zoom-in.png" width="80%">
</center>
所有视角的图像：
<center>
<img data-src="https://vincentqin.gitee.io/blogresource-1/LightField-Toolbox/all-views-raw.png" width="80%">
</center>
<p>这时候可以看到在边界视角上的图像比较黑，所以我们接下来要进行频域滤波，以及颜色校正。</p>
<h4 id="频域滤波以及颜色校正">频域滤波以及颜色校正</h4>
<p>这部分分别用到了LFFilt4DFFT以及LFColourCorrect函数。以LYTRO 1.0
为例子，我们得到的光场图像一种有11*11个视角，但是这个121个视角子孔径图像的质量真的不敢恭维，尤其是边角处的视角(u=1,v=1)时，这个图像时完全变成黑色的。所以嘛，LFFilt4DFFT这个函数是将这些变成黑色的图像或者质量不好的图像进行校正的，具体原理不作展开。LFColourCorrect这个函数是利用gamma变化对原始图像进行颜色校正的，这一点比较简单。总之利用这两个函数能够让我们得到的光场图像的质量更好，当然你也可以选择不用。</p>
以下是经过滤波之后的所有子孔径图像，可以发现边界的视角相比于频域滤波之前有了很好的可视性。
<center>
<img data-src="https://vincentqin.gitee.io/blogresource-1/LightField-Toolbox/all-views-freq-correction.png" width="80%">
</center>
以下是经过颜色校正之后的所有所有子孔径图像。
<center>
<img data-src="https://vincentqin.gitee.io/blogresource-1/LightField-Toolbox/all-views-freq-color-correction.png" width="80%">
</center>
<p>经过以上的步骤我们可以学习到白图像的处理，以及光场图像的处理等操作。当然鄙人没有列出这个工具包所有的功能介绍，大家可以根据需要建立自己工程，对自己的数据进行测试，以上！</p>
<h2
id="注意事项及测试代码"><strong><font color=red >注意事项及测试代码</font></strong></h2>
<h3 id="参数设置好了再run"><span
id="Whiteimage-Illum">参数设置好了再Run</span></h3>
<p>不少同学是因为设置不当，导致运行错误，以下鄙人列举了可能出现错误的地方。
- 务必在WhiteImagesPath处写明相机型号，确定好到底是Lytro还是Illum -
注意Illum相机的配对数据在相机的SD卡中，解压<code>caldata-Bxxxxxxxxx.tar</code>，将里面的文件拷贝出来放在路径**Sample_test**下即可
- 白图像的处理过程比较久，耐心等待就行即可 -
Lytro与Illum的频域滤波调用函数是不同的，鄙人已经把代码添加在了相应位置；这个函数用时较久，耐心等待
- 结果存放在<strong>Results_saving</strong>文件夹下 -
再次提醒，由于Illum图像的分辨率比较大，所以当程序运行到LFLytroDecodeImage以及频域滤波时会造成内存以及磁盘的大量使用，慎重考虑。
- 如有Bug请及时联系鄙人，请在评论区留言。</p>
<h3 id="没有图像文件怎么搞">没有图像文件怎么搞</h3>
<ol type="1">
<li>下载整个<a
target="_blank" rel="noopener" href="https://github.com/Vincentqyw/light-field-TB">工程</a>；</li>
<li>下载数据集：可以在<a
target="_blank" rel="noopener" href="https://www.irisa.fr/temics/demos/lightField/index.html">这里</a>下载Lytro数据集，该数据集包括白图像以及图像原文件；</li>
<li>然后将工程<code>Sample_test/Cameras/</code>下的文件<code>Axxxxxxxxxxx</code>修改为<code>A303134643</code>，然后将数据集<code>LytroDataset\sn-A303134643</code>文件夹下的<code>data.C.0.1/2/3</code>放在<code>Sample_test/Cameras/A303134643</code>文件夹下；</li>
<li>将<code>LytroDataset\raws</code>文件夹下的图像原文件放在工程<code>Sample_test/Images/A01/</code>文件夹下；</li>
<li>修改<code>Demo.m</code>中<code>WhiteImagesPath='Sample_test\Cameras\Axxxxxxxxxx'</code>，以及<code>lfpname='test'</code>改成步骤4中的任何一个图像原文件即可。</li>
<li>run起来吧~</li>
</ol>
<h3 id="解码效果为何不佳">解码效果为何不佳</h3>
<p>另外，很多童鞋问过鄙人一些问题，例如<strong>为何光场工具包解码出来的图像质量如此之差，始终达不到Lytro
Desktop导出图像的质量</strong>。其实该问题是个普遍现象，目前没有一个好的解决方法。光场工具包的发明者<strong>Donald
Dansereau</strong>在<a
target="_blank" rel="noopener" href="https://plus.google.com/communities/114934462920613225440">Google
Plus</a>也是这么认为的，鄙人把原话附在下面：</p>
<div class="note "><p>Q from email: there are differences between the toolbox decoded
output and the Lytro Desktop's image. The differences involve color,
intensity and noise. How can I fix this?</p>
<p>A: Thanks for the email. There will always be important differences
between the Lytro software output and the toolbox output. The toolbox
tries to generate a 4D light field that is as close as possible to the
raw image measured by the camera, while still being a standard two-plane
parameterized 4D light field. The Lytro software has a very different
goal. They do not produce a 4D light field, they produce 2D renders.
These are optimized to look nice, and evidently look much nicer than any
2D slice taken from the toolbox output. They use sophisticated decoding
and denoising techniques to do this. The philosophy of the toolbox is to
provide a 4D light field close to the raw image captured by the camera,
to allow researchers to explore the characteristics of this kind of
signal. It should, in theory, be possible to go from the 4D light field
output by the toolbox to nice 2D renderings like those produced by the
Lytro software. Making nice 2D renderings can also be accomplished by
working directly from the lenslet image, as has been demonstrated in a
few papers by researchers at Lytro and elsewhere.</p>
</div>
<p>从上面的回复可以看到，他提供的<strong>光场工具包的目的是尽量提供光场相机采集的原汁原味的数据（raw
data）用来逼近4D光场信息</strong>；然后让研究者根据数据恢复出自己想要的信息。但是Lytro公司提供<strong>Lytro
desktop的目的是渲染出漂亮的2D图像，以供用户使用</strong>。这也反映了研究和商业区别，Lytro并未提供他们渲染的方式，属内部机密。</p>
<p>此外鄙人也单独问了Donald
Dansereau同样的问题，作者的建议原话祭在下面： <div class="note success"><p>If you want to make nice 2D images, I suggest</p>
<p><strong>Filter before colour correction</strong>. Try a simple planar
focus filter (LFFiltShiftSum, or one of the linear filters in the
LFDemoBasicFilt* examples).</p>
<p><strong>Don't use the toolbox colour correction</strong>, the code is
extremely simplistic and is mostly meant to show you where the metadata
is. Look into some <strong>4D - to - 2D rendering techniques</strong>
for light fields.</p>
<p>Look into some <strong>2D denoising techniques</strong> and apply
them to your 2D render, or to the 4D light field slices.</p>
<p>If you do find something that works well for you please share, as
this is a common question.</p>
</div></p>
<p>鄙人习惯的参数设置如下：颜色校正的参数设为<strong>Gamma=0.8或者小于0.8</strong>（这个参数你可以不停地试，满意即可）。另外，鄙人一般不用上述代码里的频域滤波，因为鄙人认为这步会很大程度地破坏原始数据。鄙人会选用中心视角邻域的几个视角，例如原来ILLUM提供的是15x15个视角，但是我们可以选用其中的11x11或者更少的视角，这样就可以不用考虑边界视角黑暗的问题了。当然大家可以尝试按照Donald
Dansereau的说法进行尝试，如果各位有好的方法，也可以告诉鄙人。（PS：以上为回复@lixiaohao同学邮件部分内容）</p>
<h3 id="lytro1.0-2d原始图像解码原理">Lytro1.0 2D原始图像解码原理</h3>
<p>以下是本人研一时做的解码原理解释，各位同学可参考下。</p>
<div class="pdf-container" data-target="https://vincentqin.gitee.io/blogresource-1/LightField-Toolbox/decoding_process.pdf" data-height="500px"></div>
<h3 id="测试代码">测试代码</h3>
<p>以下是Demo文件的代码，仅供学习使用。</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br></pre></td><td class="code"><pre><span class="line">clc;</span><br><span class="line">clear all;</span><br><span class="line">clc;</span><br><span class="line"></span><br><span class="line">addpath(genpath(<span class="string">&#x27;Sample_test&#x27;</span>));</span><br><span class="line">addpath(genpath(<span class="string">&#x27;LFToolbox0.4&#x27;</span>));</span><br><span class="line"></span><br><span class="line">LFMatlabPathSetup;</span><br><span class="line"></span><br><span class="line"><span class="comment">%% Step1: 解压data.C.0/1/2/3---&gt;white,结果存储在Cameras中</span></span><br><span class="line">fprintf(<span class="string">&#x27;===============Step1: Unpack Lytro Files===============\n\n &#x27;</span>);</span><br><span class="line">LFUtilUnpackLytroArchive(<span class="string">&#x27;Sample_test&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">%% Step2: 包含刚刚解压出来的文件的目录</span></span><br><span class="line"></span><br><span class="line">fprintf(<span class="string">&#x27;===============Step2: Process WhiteImages===============\n\n&#x27;</span>);</span><br><span class="line"></span><br><span class="line">WhiteImagesPath=<span class="string">&#x27;Sample_test\Cameras\B5151500510&#x27;</span>; <span class="comment">% 务必要设置这个值 B5151500510   A303134427</span></span><br><span class="line">LFUtilProcessWhiteImages( WhiteImagesPath);</span><br><span class="line"></span><br><span class="line"><span class="comment">%% Step3: 解码光场图像.lfp</span></span><br><span class="line">fprintf(<span class="string">&#x27;=====================Step3: Decode LFP===================\n\n&#x27;</span>);</span><br><span class="line">cd(<span class="string">&#x27;Sample_test&#x27;</span>);  <span class="comment">% 进入Sample_test目录</span></span><br><span class="line"></span><br><span class="line">lfpname=<span class="string">&#x27;baby&#x27;</span>; <span class="comment">%测试图像名称，改成你自己的</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> WhiteImagesPath(<span class="number">21</span>)==<span class="string">&#x27;A&#x27;</span>    <span class="comment">%找到型号  exist(&#x27;LYTRO&#x27;,&#x27;var&#x27;)</span></span><br><span class="line">    version=<span class="string">&#x27;F01&#x27;</span>;</span><br><span class="line"><span class="keyword">elseif</span> WhiteImagesPath(<span class="number">21</span>)==<span class="string">&#x27;B&#x27;</span><span class="comment">%找到型号  exist(&#x27;ILLUM&#x27;,&#x27;var&#x27;)</span></span><br><span class="line">    version=<span class="string">&#x27;B01&#x27;</span>;</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">InputFname=[<span class="string">&#x27;Images\&#x27;</span>,version,<span class="string">&#x27;\&#x27;</span>,lfpname,<span class="string">&#x27;.lfp&#x27;</span>];</span><br><span class="line"></span><br><span class="line">[LF, LFMetadata,WhiteImage,CorrectedLensletImage, ...</span><br><span class="line">WhiteImageMetadata, LensletGridModel, DecodeOptions]...</span><br><span class="line">                              =  LFLytroDecodeImage(InputFname);</span><br><span class="line">cd(<span class="string">&#x27;..&#x27;</span>);</span><br><span class="line"></span><br><span class="line">imshow(CorrectedLensletImage) <span class="comment">%Raw Image</span></span><br><span class="line">mkdir([<span class="string">&#x27;Results_saving\&#x27;</span>,lfpname]);</span><br><span class="line">imwrite(CorrectedLensletImage,[<span class="string">&#x27;Results_saving\&#x27;</span>,lfpname,<span class="string">&#x27;\&#x27;</span>,lfpname,<span class="string">&#x27;.bmp&#x27;</span>]);</span><br><span class="line">save([<span class="string">&#x27;Results_saving\&#x27;</span>,lfpname,<span class="string">&#x27;\&#x27;</span>,lfpname,<span class="string">&#x27;.mat&#x27;</span>],<span class="string">&#x27;CorrectedLensletImage&#x27;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">%% =======================频域滤波================================</span></span><br><span class="line"><span class="comment">%---Setup for linear filters---</span></span><br><span class="line">tic</span><br><span class="line"><span class="comment">% lytro</span></span><br><span class="line"><span class="keyword">if</span> strcmp(version,<span class="string">&#x27;F01&#x27;</span>)==<span class="number">1</span></span><br><span class="line">    LFPaddedSize = [<span class="number">16</span>, <span class="number">16</span>, <span class="number">400</span>, <span class="number">400</span>];</span><br><span class="line">    BW = <span class="number">0.03</span>;</span><br><span class="line">    FiltOptions = [];</span><br><span class="line">    FiltOptions.Rolloff = <span class="string">&#x27;Butter&#x27;</span>;</span><br><span class="line">    Slope1 = <span class="number">-3</span>/<span class="number">9</span>; <span class="comment">% Lorikeet</span></span><br><span class="line">    Slope2 = <span class="number">4</span>/<span class="number">9</span>;  <span class="comment">% Building</span></span><br><span class="line">    fprintf(<span class="string">&#x27;Building 4D frequency hyperfan... &#x27;</span>);</span><br><span class="line">    [H, FiltOptionsOut] = LFBuild4DFreqHyperfan( LFPaddedSize, Slope1, Slope2, BW, FiltOptions );</span><br><span class="line">    fprintf(<span class="string">&#x27;Applying filter&#x27;</span>);</span><br><span class="line">    [LFFilt, FiltOptionsOut] = LFFilt4DFFT( LF, H, FiltOptionsOut );</span><br><span class="line"></span><br><span class="line"><span class="comment">% illum</span></span><br><span class="line"><span class="keyword">elseif</span> strcmp(version,<span class="string">&#x27;B01&#x27;</span>)==<span class="number">1</span></span><br><span class="line"></span><br><span class="line">    LFSize = <span class="built_in">size</span>(LF);</span><br><span class="line">    LFPaddedSize = LFSize;</span><br><span class="line">    BW = <span class="number">0.04</span>;</span><br><span class="line">    FiltOptions = [];</span><br><span class="line">    <span class="comment">%---Demonstrate 4D Hyperfan filter---</span></span><br><span class="line">    Slope1 = <span class="number">-4</span>/<span class="number">15</span>; <span class="comment">% Lorikeet</span></span><br><span class="line">    Slope2 = <span class="number">15</span>/<span class="number">15</span>; <span class="comment">% Far background</span></span><br><span class="line">    fprintf(<span class="string">&#x27;Building 4D frequency hyperfan... &#x27;</span>);</span><br><span class="line">    [H, FiltOptionsOut] = LFBuild4DFreqHyperfan( LFPaddedSize, Slope1, Slope2, BW, FiltOptions );</span><br><span class="line">    fprintf(<span class="string">&#x27;Applying filter&#x27;</span>);</span><br><span class="line">    [LFFilt, FiltOptionsOut] = LFFilt4DFFT( LF, H, FiltOptionsOut );</span><br><span class="line">    title(sprintf(<span class="string">&#x27;Frequency hyperfan filter, slopes %.3g, %.3g, BW %.3g&#x27;</span>, Slope1, Slope2, BW));</span><br><span class="line">    drawnow</span><br><span class="line">    save([<span class="string">&#x27;Results_saving\&#x27;</span>,lfpname,<span class="string">&#x27;\&#x27;</span>,lfpname,<span class="string">&#x27;5D.mat&#x27;</span>],<span class="string">&#x27;LFFilt&#x27;</span>);</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">%% =======================颜色校正参数设置==========================                               </span></span><br><span class="line"></span><br><span class="line">ColMatrix = DecodeOptions.ColourMatrix;</span><br><span class="line">Gamma=DecodeOptions.Gamma;</span><br><span class="line">ColBalance=DecodeOptions.ColourBalance;</span><br><span class="line"></span><br><span class="line"><span class="comment">% 对3280*3280的原始彩色图像进行颜色校正</span></span><br><span class="line">ColorCorrectedImage=LFColourCorrect(CorrectedLensletImage, ColMatrix, ColBalance, Gamma);</span><br><span class="line">imwrite(ColorCorrectedImage,[<span class="string">&#x27;Results_saving\&#x27;</span>,lfpname,<span class="string">&#x27;\&#x27;</span>,lfpname,<span class="string">&#x27;ColorCorrectedImage.bmp&#x27;</span>]);</span><br><span class="line">save([<span class="string">&#x27;Results_saving\&#x27;</span>,lfpname,<span class="string">&#x27;\&#x27;</span>,lfpname,<span class="string">&#x27;ColorCorrectedImage.mat&#x27;</span>],<span class="string">&#x27;ColorCorrectedImage&#x27;</span>)</span><br><span class="line">imshow(ColorCorrectedImage);title(<span class="string">&#x27;Corrected Lenslet Image&#x27;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">%% 同样是颜色矫正， 为了得到光场数据。得到5-D LFColorCorrectedImage数据</span></span><br><span class="line">LFColorCorrectedImage=<span class="built_in">zeros</span>(<span class="built_in">size</span>(LF,<span class="number">1</span>),<span class="built_in">size</span>(LF,<span class="number">2</span>),<span class="built_in">size</span>(LF,<span class="number">3</span>),<span class="built_in">size</span>(LF,<span class="number">4</span>),<span class="built_in">size</span>(LF,<span class="number">5</span>));</span><br><span class="line"><span class="keyword">for</span> <span class="built_in">i</span>=<span class="number">1</span>:<span class="built_in">size</span>(LF,<span class="number">1</span>)</span><br><span class="line">    <span class="keyword">for</span> <span class="built_in">j</span>=<span class="number">1</span>:<span class="built_in">size</span>(LF,<span class="number">2</span>)</span><br><span class="line">        temp =<span class="built_in">squeeze</span>(LFFilt(<span class="built_in">i</span>,<span class="built_in">j</span>,:,:,<span class="number">1</span>:<span class="number">3</span>));</span><br><span class="line">        temp = LFColourCorrect(temp, ColMatrix, ColBalance, Gamma);</span><br><span class="line">        LFColorCorrectedImage(<span class="built_in">i</span>,<span class="built_in">j</span>,:,:,<span class="number">1</span>:<span class="number">3</span>)=temp;</span><br><span class="line">        imshow(temp);</span><br><span class="line">        pause(<span class="number">0.1</span>)</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">LFColorCorrectedImage(:,:,:,:,<span class="number">4</span>)=LF(:,:,:,:,<span class="number">4</span>);</span><br><span class="line">save([<span class="string">&#x27;Results_saving\&#x27;</span>,lfpname,<span class="string">&#x27;\&#x27;</span>,lfpname,<span class="string">&#x27;RawLFColorCorrectedImage.mat&#x27;</span>],<span class="string">&#x27;LFColorCorrectedImage&#x27;</span>);<span class="comment">% very important</span></span><br><span class="line"></span><br><span class="line">toc</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<hr />
<p><del>## Lytro官网可视化工具</del></p>
<p><del>谁让人家Lytro不开源呢，人家自己做的Demo还不错。通过鼠标就可以对以下图像进行<strong>重聚焦，变化视角，以及缩放</strong>等操作。话不多说，上图！</del>
呵，人家公司在2017年11月30号之后停止了对lytro live
photo的线上支持，所以以下啥都没有了。
<!--<center><iframe width='600' height='434' src='https://pictures.lytro.com/89268543555/pictures/1083179/embed' frameborder='0' allowfullscreen scrolling='no'></iframe></center> <center><iframe width='600' height='434' src='https://pictures.lytro.com/michaelsternoffphoto/pictures/1030057/embed' frameborder='0' allowfullscreen scrolling='no'></iframe></center> <center><iframe width='600' height='434' src='https://pictures.lytro.com/karinaguillenphoto/pictures/926574/embed' frameborder='0' allowfullscreen scrolling='no'></iframe></center> <center><iframe width='600' height='434' src='https://pictures.lytro.com/karinaguillenphoto/pictures/1004450/embed' frameborder='0' allowfullscreen scrolling='no'></iframe></center>更多图像在[这里](https://pictures.lytro.com/)。--></p>
<h3 id="数字重聚焦">数字重聚焦</h3>
<p>利用如下的重聚焦公式可以实现光场图像的重聚焦。 <span
class="math display">\[
L_{\alpha}(x,y,u,v)=L_0(x+(1-\frac{1}{\alpha})u,y+(1-\frac{1}{\alpha})v,u,v)
\]</span></p>
<p><img data-src="https://vincentqin.gitee.io/blogresource-1/LightField-Toolbox/concatImg.png" />
左图为其中心视角图像，右图为重聚焦（参数 <span
class="math inline">\(\alpha\)</span> =0.5）之后的图像。</p>
<p>给出部分测试代码如下，全部代码见<strong><a
target="_blank" rel="noopener" href="https://github.com/Vincentqyw/Light-Field-Refocusing">Github</a></strong>;</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">%% This is a demo of light field refocusing</span></span><br><span class="line"><span class="comment">% input: LF </span></span><br><span class="line"><span class="comment">% ouput: refocused pinhole image</span></span><br><span class="line"><span class="comment">% Writen by: Vincent Qin</span></span><br><span class="line"><span class="comment">% Data: 2018 May 17th 21:35:14</span></span><br><span class="line"></span><br><span class="line"><span class="comment">%% Note: the input is 5D LF data  decoded from Matlab Light field Toolbox</span></span><br><span class="line"></span><br><span class="line">clc;</span><br><span class="line"></span><br><span class="line">addpath(genpath(pwd));</span><br><span class="line"><span class="comment">%% mex function</span></span><br><span class="line">cd(<span class="string">&#x27;src&#x27;</span>); </span><br><span class="line">mex REMAP2REFOCUS_mex.c </span><br><span class="line">mex BLOCKMEAN_mex.c </span><br><span class="line">cd ..</span><br><span class="line"></span><br><span class="line">use_vincent_data=<span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> use_vincent_data</span><br><span class="line">    <span class="built_in">disp</span>(<span class="string">&#x27;Downloading LF data, please wait...&#x27;</span>);</span><br><span class="line"></span><br><span class="line">    URL=<span class="string">&#x27;http://p8vl2tjcq.bkt.clouddn.com/LF.mat&#x27;</span>;</span><br><span class="line">    [f, status] = urlwrite(URL,<span class="string">&#x27;input/LF_web.mat&#x27;</span>);</span><br><span class="line">    <span class="keyword">if</span> status == <span class="number">1</span>;</span><br><span class="line">        fprintf(<span class="number">1</span>,<span class="string">&#x27;Success！\n&#x27;</span>);</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        fprintf(<span class="number">1</span>,<span class="string">&#x27;Failed！\n&#x27;</span>);</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    load(<span class="string">&#x27;input/LF_web.mat&#x27;</span>);</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    load(<span class="string">&#x27;input/your_LF_data.mat&#x27;</span>);</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">disp</span>(<span class="string">&#x27;Processing LF to Remap image...&#x27;</span>);</span><br><span class="line"></span><br><span class="line">LF=LF(:,:,:,:,<span class="number">1</span>:<span class="number">3</span>);</span><br><span class="line">[UV_diameter,~,y_size,x_size,c]=<span class="built_in">size</span>(LF);</span><br><span class="line"></span><br><span class="line"><span class="comment">%  get LF remap and pinhole image before refocusing</span></span><br><span class="line">LF_Remap = LF2Remap(LF);</span><br><span class="line"><span class="comment">% IM_Refoc_1 = zeros(y_size, x_size,3);temp = zeros(y_size, x_size);</span></span><br><span class="line"><span class="comment">% BLOCKMEAN_mex(x_size, y_size, UV_diameter, LF_Remap(:,:,1), temp);IM_Refoc_1(:,:,1)=temp;</span></span><br><span class="line"><span class="comment">% BLOCKMEAN_mex(x_size, y_size, UV_diameter, LF_Remap(:,:,2), temp);IM_Refoc_1(:,:,2)=temp;</span></span><br><span class="line"><span class="comment">% BLOCKMEAN_mex(x_size, y_size, UV_diameter, LF_Remap(:,:,3), temp);IM_Refoc_1(:,:,3)=temp;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">% get params</span></span><br><span class="line">LF_x_size = x_size * UV_diameter;</span><br><span class="line">LF_y_size = y_size * UV_diameter;</span><br><span class="line">UV_radius = (UV_diameter<span class="number">-1</span>)/<span class="number">2</span>;</span><br><span class="line">UV_size   = UV_diameter*UV_diameter;</span><br><span class="line"></span><br><span class="line"><span class="comment">% collect data</span></span><br><span class="line">LF_parameters       = struct(...</span><br><span class="line">                             <span class="string">&#x27;LF_x_size&#x27;</span>,LF_x_size,...</span><br><span class="line">                             <span class="string">&#x27;LF_y_size&#x27;</span>,LF_y_size,...</span><br><span class="line">                             <span class="string">&#x27;x_size&#x27;</span>,x_size,...</span><br><span class="line">                             <span class="string">&#x27;y_size&#x27;</span>,y_size,...</span><br><span class="line">                             <span class="string">&#x27;UV_radius&#x27;</span>,(UV_diameter<span class="number">-1</span>)/<span class="number">2</span>,...</span><br><span class="line">                             <span class="string">&#x27;UV_diameter&#x27;</span>,UV_diameter,...</span><br><span class="line">                             <span class="string">&#x27;UV_size&#x27;</span>,UV_diameter*UV_diameter) ;</span><br><span class="line"></span><br><span class="line"><span class="comment">% predefine output</span></span><br><span class="line">LF_Remap_alpha   = <span class="built_in">zeros</span>(LF_y_size,LF_x_size,<span class="number">3</span>) ;</span><br><span class="line">IM_Refoc_alpha   = <span class="built_in">zeros</span>(y_size,x_size,<span class="number">3</span>)       ;</span><br><span class="line"></span><br><span class="line"><span class="comment">% here begins refocusing</span></span><br><span class="line"><span class="built_in">disp</span>(<span class="string">&#x27;Processing refocusing...&#x27;</span>);</span><br><span class="line">alpha=<span class="number">0.5</span>;    <span class="comment">%　shearing number</span></span><br><span class="line">REMAP2REFOCUS_mex(x_size,y_size,UV_diameter,UV_radius,LF_Remap,LF_Remap_alpha,IM_Refoc_alpha,alpha);  </span><br><span class="line"></span><br><span class="line"><span class="comment">% show figure</span></span><br><span class="line">central_view=<span class="built_in">squeeze</span>(LF(UV_radius+<span class="number">1</span>,UV_radius+<span class="number">1</span>,:,:,:));</span><br><span class="line"><span class="built_in">figure</span>; imshow(central_view);</span><br><span class="line">title(<span class="string">&#x27;central view&#x27;</span>);set(gcf,<span class="string">&#x27;color&#x27;</span>,[<span class="number">1</span> <span class="number">1</span> <span class="number">1</span>]);  </span><br><span class="line"><span class="built_in">figure</span>; imshow(IM_Refoc_alpha);</span><br><span class="line">title([<span class="string">&#x27;refocused image pinhole at alpha = &#x27;</span> num2str(alpha)]);</span><br><span class="line">set(gcf,<span class="string">&#x27;color&#x27;</span>,[<span class="number">1</span> <span class="number">1</span> <span class="number">1</span>]);  </span><br><span class="line"></span><br><span class="line"><span class="comment">% concat them</span></span><br><span class="line">concatImg=[central_view,IM_Refoc_alpha];</span><br><span class="line"><span class="built_in">figure</span>;imshow(concatImg);set(gcf,<span class="string">&#x27;color&#x27;</span>,[<span class="number">1</span> <span class="number">1</span> <span class="number">1</span>]); </span><br><span class="line">imwrite(concatImg,<span class="string">&#x27;concatImg.png&#x27;</span>);</span><br></pre></td></tr></table></figure>
<h3 id="lytro-desktop">Lytro Desktop</h3>
<p>Lytro
Desktop是曾经的Lytro官方提供的软件，可以处理由Lytro系列相机拍摄到的图像。利用该软件能够导出相机配对数据、重聚焦图像、全聚焦图、深度图、原始文件等。下面给出一些常用的导出文件。</p>
<ul>
<li>导入需要处理的图像</li>
</ul>
<p><img data-src="https://vincentqin.gitee.io/blogresource-1/LightField-Toolbox/lytro-desktop-1.jpg" /></p>
<ul>
<li>导出配对数据</li>
</ul>
<p><img data-src="https://vincentqin.gitee.io/blogresource-1/LightField-Toolbox/lytro-desktop-3.jpg" /></p>
<ul>
<li>导出待处理图像的各种格式</li>
</ul>
<p><img data-src="https://vincentqin.gitee.io/blogresource-1/LightField-Toolbox/lytro-desktop-2.jpg" /></p>
<ul>
<li>全聚焦彩色图与内置深度图</li>
</ul>
<p><img data-src="https://vincentqin.gitee.io/blogresource-1/LightField-Toolbox/color-depth.jpg" /></p>
<ul>
<li>重聚焦</li>
</ul>
<p><img data-src="https://vincentqin.gitee.io/blogresource-1/LightField-Toolbox/refocusing.jpg" /></p>
<center>
以上，如有问题欢迎评论
</center>
<!-- ![](https://vincentqin.tech/blog-resources/wechat-qcode.gif) -->

    </div>

    
    
    
      


    <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/Light-Field/" rel="tag"># Light Field</a>
              <a href="/tags/Matlab%E5%85%89%E5%9C%BA%E5%B7%A5%E5%85%B7%E5%8C%85/" rel="tag"># Matlab光场工具包</a>
              <a href="/tags/%E5%85%89%E5%9C%BA/" rel="tag"># 光场</a>
              <a href="/tags/%E8%AE%A1%E7%AE%97%E6%88%90%E5%83%8F/" rel="tag"># 计算成像</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/posts/matlab-tools/" rel="prev" title="MATLAB:多个不同维度的箱线图画在一起">
                  <i class="fa fa-chevron-left"></i> MATLAB:多个不同维度的箱线图画在一起
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/posts/journal2JP-USA/" rel="next" title="日本与美国之行">
                  日本与美国之行 <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






    <div class="comments" id="waline"></div>
</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 2016 – 
  <span itemprop="copyrightYear">2023</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Vincent Qin</span>
</div>
<div class="busuanzi-count">
    <span class="post-meta-item" id="busuanzi_container_site_uv">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="Total Visitors">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-item" id="busuanzi_container_site_pv">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="Total Views">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>

    </div>
  </footer>

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/lozad.js/1.16.0/lozad.min.js" integrity="sha256-mOFREFhqmHeQbXpK2lp4nA3qooVgACfh88fpJftLBbc=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/next-boot.js"></script>

  

  <script class="next-config" data-name="pdf" type="application/json">{"object_url":{"url":"https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.2.8/pdfobject.min.js","integrity":"sha256-tu9j5pBilBQrWSDePOOajCUdz6hWsid/lBNzK4KgEPM="},"url":"/lib/pdf/web/viewer.html"}</script>
  <script src="/js/third-party/tags/pdf.js"></script>

  <script class="next-config" data-name="mermaid" type="application/json">{"enable":true,"theme":{"light":"default","dark":"dark"},"js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/mermaid/9.1.6/mermaid.min.js","integrity":"sha256-ZfzwelSToHk5YAcr9wbXAmWgyn9Jyq08fSLrLhZE89w="}}</script>
  <script src="/js/third-party/tags/mermaid.js"></script>



  
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>




  

  <script class="next-config" data-name="enableMath" type="application/json">true</script><script class="next-config" data-name="mathjax" type="application/json">{"enable":true,"tags":"all","js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.2/es5/tex-mml-chtml.js","integrity":"sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI="}}</script>
<script src="/js/third-party/math/mathjax.js"></script>


<script class="next-config" data-name="waline" type="application/json">{"lang":"en-US","enable":true,"serverURL":"https://comments.vincentqin.tech","cssUrl":"https://unpkg.com/@waline/client@v2/dist/waline.css","commentCount":true,"pageview":true,"locale":{"placeholder":"Welcome to comment"},"emoji":["https://unpkg.com/@waline/emojis@1.1.0/weibo","https://unpkg.com/@waline/emojis@1.1.0/alus","https://unpkg.com/@waline/emojis@1.1.0/bilibili","https://unpkg.com/@waline/emojis@1.1.0/qq","https://unpkg.com/@waline/emojis@1.1.0/tieba","https://unpkg.com/@waline/emojis@1.1.0/tw-emoji"],"meta":["nick","mail","link"],"requiredMeta":["nick","mail"],"wordLimit":0,"login":"enable","el":"#waline","comment":true,"libUrl":"//unpkg.com/@waline/client@v2/dist/waline.js","path":"/posts/LightField-Toolbox/"}</script>
<link rel="stylesheet" href="https://unpkg.com/@waline/client@v2/dist/waline.css">
<script>
document.addEventListener('page:loaded', () => {
  NexT.utils.loadComments(CONFIG.waline.el).then(() =>
    NexT.utils.getScript(CONFIG.waline.libUrl, { condition: window.Waline })
  ).then(() => 
    Waline.init(Object.assign({}, CONFIG.waline,{ el: document.querySelector(CONFIG.waline.el) }))
  );
});
</script>

</body>
</html>
